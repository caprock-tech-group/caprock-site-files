<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Business Risk Audit | Caprock Technology Group</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&family=JetBrains+Mono:wght@400;700&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'brand-blue': '#4ade80',
                        'dark-bg': '#0f172a',
                        'dark-card': '#1e293b',
                        'industrial-border': '#334155',
                    }
                }
            }
        }
    </script>
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #0f172a; color: #d1d5db; }
        .risk-gradient { background: linear-gradient(180deg, rgba(74, 222, 128, 0.1) 0%, rgba(15, 23, 42, 1) 100%); }
        .glass-card { background: rgba(30, 41, 59, 0.7); backdrop-filter: blur(12px); border: 1px solid rgba(255, 255, 255, 0.1); }
        .step-content { display: none; }
        .step-content.active { display: block; animation: fadeInUp 0.4s ease-out; }
        @keyframes fadeInUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="min-h-screen risk-gradient pb-24">

    <header class="border-b border-industrial-border bg-dark-card/80 sticky top-0 z-50 backdrop-blur-md">
        <div class="container mx-auto px-4 py-4 flex justify-between items-center">
            <div class="flex items-center gap-3">
                <div class="bg-white p-1 rounded">
                    <img src="caprock logo transparent BG 2.png" alt="Caprock" class="h-8">
                </div>
                <h1 class="font-black uppercase tracking-tighter text-white">Business <span class="text-brand-blue">Risk Audit</span></h1>
            </div>
            <div id="progress-indicator" class="font-mono text-[10px] text-brand-blue uppercase font-bold tracking-[0.2em]">0% Complete</div>
        </div>
    </header>

    <main class="container mx-auto px-4 mt-12 max-w-3xl">
        
        <div id="step-1" class="step-content active text-center">
            <h2 class="text-4xl md:text-6xl font-black text-white uppercase tracking-tighter leading-none mb-6">
                Is your business <br><span class="text-brand-blue">Digital-Storm Proof?</span>
            </h2>
            <p class="text-gray-400 text-lg mb-10 max-w-xl mx-auto">
                Most Amarillo businesses operate with hidden digital vulnerabilities. Take 2 minutes to calculate your <strong>Immunity Score</strong>.
            </p>
            
            <div class="glass-card p-8 rounded-2xl max-w-md mx-auto">
                <div class="space-y-6 text-left">
                    <div>
                        <label class="block text-[10px] font-black text-gray-500 uppercase tracking-widest mb-2">Company Name</label>
                        <input type="text" id="bizName" class="w-full bg-dark-bg border border-industrial-border rounded p-4 text-white focus:border-brand-blue outline-none font-bold" placeholder="e.g. Smith & Sons Trading">
                    </div>
                    <button onclick="changeStep(1)" class="w-full bg-brand-blue text-dark-bg font-black py-4 rounded uppercase tracking-widest text-sm shadow-[0_0_30px_rgba(74,222,128,0.3)] hover:scale-[1.02] transition-all">
                        Begin Audit &rarr;
                    </button>
                </div>
            </div>
        </div>

        <div id="step-2" class="step-content">
            <div class="mb-8">
                <span class="text-brand-blue font-mono text-xs uppercase font-bold tracking-widest">Category 01 // Identity</span>
                <h2 class="text-4xl font-black text-white uppercase tracking-tighter mt-2">The Front Door</h2>
                <p class="text-gray-400">Breaches happen when digital keys are stolen. How strong is your lock?</p>
            </div>
            <div class="space-y-6">
                <div class="glass-card p-6 rounded-xl">
                    <p class="text-white font-bold text-lg mb-4">Do all employees use a 'Second Lock' (MFA/Phone Code) to check email?</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="setAns('q1', 25); changeStep(1)" class="bg-industrial-border hover:bg-brand-blue hover:text-dark-bg py-4 rounded font-black text-xs uppercase transition-all">Yes, Always</button>
                        <button onclick="setAns('q1', 0); changeStep(1)" class="bg-industrial-border hover:bg-red-500 py-4 rounded font-black text-xs uppercase transition-all">No / Some</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-3" class="step-content">
            <div class="mb-8">
                <span class="text-brand-blue font-mono text-xs uppercase font-bold tracking-widest">Category 02 // Survival</span>
                <h2 class="text-4xl font-black text-white uppercase tracking-tighter mt-2">The Safety Net</h2>
                <p class="text-gray-400">If your computers died today, how long until you're back making money?</p>
            </div>
            <div class="space-y-6">
                <div class="glass-card p-6 rounded-xl">
                    <p class="text-white font-bold text-lg mb-4">Have you successfully tested a file recovery in the last 3 months?</p>
                    <div class="grid grid-cols-2 gap-4">
                        <button onclick="setAns('q2', 35); changeStep(1)" class="bg-industrial-border hover:bg-brand-blue hover:text-dark-bg py-4 rounded font-black text-xs uppercase transition-all">Yes, Proven</button>
                        <button onclick="setAns('q2', 5); changeStep(1)" class="bg-industrial-border hover:bg-red-500 py-4 rounded font-black text-xs uppercase transition-all">No / Unsure</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-4" class="step-content">
            <div class="mb-8">
                <span class="text-brand-blue font-mono text-xs uppercase font-bold tracking-widest">Category 03 // Defense</span>
                <h2 class="text-4xl font-black text-white uppercase tracking-tighter mt-2">The Guard Dog</h2>
                <p class="text-gray-400">Are your systems actively hunting for threats, or just waiting to get sick?</p>
            </div>
            <div class="space-y-6">
                <div class="glass-card p-6 rounded-xl">
                    <p class="text-white font-bold text-lg mb-4">What type of protection is installed on your computers?</p>
                    <div class="flex flex-col gap-4">
                        <button onclick="setAns('q3', 25); changeStep(1)" class="bg-industrial-border hover:bg-brand-blue hover:text-dark-bg py-4 px-6 rounded font-black text-left flex justify-between items-center transition-all group">
                            <span class="text-xs uppercase">Autonomous AI (SentinelOne / Crowdstrike)</span>
                            <span class="text-brand-blue font-mono text-[10px] opacity-0 group-hover:opacity-100">+25 pts</span>
                        </button>
                        <button onclick="setAns('q3', 7); changeStep(1)" class="bg-industrial-border hover:bg-amber-500 hover:text-dark-bg py-4 px-6 rounded font-black text-left flex justify-between items-center transition-all group">
                            <span class="text-xs uppercase">Basic Antivirus (McAfee / Norton / Defender)</span>
                            <span class="text-amber-200 font-mono text-[10px] opacity-0 group-hover:opacity-100">+7 pts</span>
                        </button>
                        <button onclick="setAns('q3', 0); changeStep(1)" class="bg-industrial-border hover:bg-red-500 py-4 px-6 rounded font-black text-xs uppercase transition-all">None / Unknown</button>
                    </div>
                </div>
            </div>
        </div>

        <div id="step-5" class="step-content text-center">
            <div class="mb-10">
                <h2 class="text-7xl font-black text-white uppercase tracking-tighter leading-none" id="displayScore">00</h2>
                <p class="text-brand-blue font-mono text-sm uppercase tracking-widest font-bold mt-2">Final Immunity Score</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-10 text-left">
                <div class="glass-card p-6 rounded-xl border-t-4 border-brand-blue">
                    <p class="text-[10px] uppercase font-bold text-gray-500">Identity Lock</p>
                    <p class="text-white font-black text-xl" id="scoreId">--</p>
                </div>
                <div class="glass-card p-6 rounded-xl border-t-4 border-brand-blue">
                    <p class="text-[10px] uppercase font-bold text-gray-500">Survival Rate</p>
                    <p class="text-white font-black text-xl" id="scoreSurv">--</p>
                </div>
                <div class="glass-card p-6 rounded-xl border-t-4 border-brand-blue">
                    <p class="text-[10px] uppercase font-bold text-gray-500">Defense Active</p>
                    <p class="text-white font-black text-xl" id="scoreDef">--</p>
                </div>
            </div>

            <div class="glass-card p-8 rounded-2xl text-left border border-brand-blue/30 shadow-2xl mb-8">
                <h3 class="text-xl font-black text-white uppercase tracking-tight mb-2">Strategic Remediation</h3>
                <p id="remediation-text" class="text-gray-300 text-sm mb-6 leading-relaxed"></p>
                
                <form name="risk-audit" method="POST" data-netlify="true" action="/thank-you.html" class="space-y-4">
                    <input type="hidden" name="form-name" value="risk-audit">
                    <input type="hidden" name="immunity-score" id="form-score">
                    <input type="hidden" name="company-name-hidden" id="form-biz">
                    <input type="hidden" name="q1" id="form-q1">
                    <input type="hidden" name="q2" id="form-q2">
                    <input type="hidden" name="q3" id="form-q3">

                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" name="name" required placeholder="Full Name" class="bg-dark-bg border border-industrial-border p-4 text-xs font-mono text-white focus:border-brand-blue outline-none font-bold">
                        <input type="tel" name="phone" required placeholder="Phone Number" class="bg-dark-bg border border-industrial-border p-4 text-xs font-mono text-white focus:border-brand-blue outline-none font-bold">
                    </div>
                    <button type="submit" class="w-full bg-brand-blue text-dark-bg font-black py-5 rounded uppercase tracking-widest text-sm shadow-[0_0_40px_rgba(74,222,128,0.3)] hover:bg-white transition-all">
                        Book Expert Briefing
                    </button>
                </form>
            </div>

            <button onclick="genFullReport()" class="w-full border border-industrial-border text-gray-400 font-bold py-3 rounded uppercase tracking-widest text-[10px] hover:text-white transition-all">
                Download Strategic Analysis
            </button>
        </div>

    </main>

    <script>
        const { jsPDF } = window.jspdf;
        let currentStep = 1;
        let answers = { q1: 0, q2: 0, q3: 0, remote: 15 }; 

        function changeStep(dir) {
            if (currentStep === 1 && !document.getElementById('bizName').value) return alert('Enter Company Name');
            document.getElementById(`step-${currentStep}`).classList.remove('active');
            currentStep += dir;
            document.getElementById(`step-${currentStep}`).classList.add('active');
            document.getElementById('progress-indicator').innerText = `${((currentStep-1)/4)*100}% Complete`;
            if (currentStep === 5) renderResults();
            window.scrollTo(0,0);
        }

        function setAns(q, val) { answers[q] = val; }

        function renderResults() {
            const total = parseInt(answers.q1) + parseInt(answers.q2) + parseInt(answers.q3) + parseInt(answers.remote);
            document.getElementById('displayScore').innerText = total;
            document.getElementById('scoreId').innerText = `${answers.q1}/25`;
            document.getElementById('scoreSurv').innerText = `${answers.q2}/35`;
            document.getElementById('scoreDef').innerText = `${answers.q3}/25`;

            document.getElementById('form-score').value = total;
            document.getElementById('form-biz').value = document.getElementById('bizName').value;
            document.getElementById('form-q1').value = answers.q1;
            document.getElementById('form-q2').value = answers.q2;
            document.getElementById('form-q3').value = answers.q3;

            let rem = "CRITICAL RISK: Your systems are currently unprotected against modern ransomware. We recommend an immediate upgrade to the **Partner Membership** for full defense and survival management.";
            if (total >= 85) rem = "SOLID POSTURE: You have excellent standards. The **Watchtower Membership** is recommended to keep these autonomous defenses running at peak efficiency.";
            else if (total >= 60) rem = "MODERATE RISK: You have baseline tools, but manual processes (like user-driven antivirus) create gaps. The **Partner Membership** will close these holes permanently.";
            
            document.getElementById('remediation-text').innerText = rem;
        }

        function genFullReport() {
            const doc = new jsPDF();
            const biz = document.getElementById('bizName').value || "Client";
            const score = parseInt(document.getElementById('displayScore').innerText);
            const remText = document.getElementById('remediation-text').innerText;

            doc.setFillColor(15, 23, 42); doc.rect(0, 0, 210, 50, 'F');
            doc.setTextColor(74, 222, 128); doc.setFontSize(26); doc.setFont("helvetica", "bold");
            doc.text("CAPROCK STRATEGIC AUDIT", 20, 28);
            doc.setTextColor(255, 255, 255); doc.setFontSize(10);
            doc.text(`BUSINESS: ${biz.toUpperCase()}`, 20, 36);
            doc.text(`DATE: ${new Date().toLocaleDateString()}`, 20, 41);

            let sColor = score >= 85 ? [74, 222, 128] : score >= 60 ? [245, 158, 11] : [239, 68, 68];
            doc.setFillColor(...sColor); doc.rect(145, 65, 45, 25, 'F');
            doc.setTextColor(255, 255, 255); doc.setFontSize(32); doc.setFont("helvetica", "bold");
            doc.text(score.toString(), 167, 83, { align: "center" });
            doc.setFontSize(8); doc.text("IMMUNITY SCORE", 167, 88, { align: "center" });

            doc.setTextColor(15, 23, 42); doc.setFontSize(16); doc.text("1.0 STRATEGIC FINDINGS", 20, 75);
            doc.setDrawColor(51, 65, 85); doc.setLineWidth(0.5); doc.line(20, 78, 130, 78);

            doc.setFontSize(11); doc.setFont("helvetica", "bold");
            doc.text("IDENTITY (FRONT DOOR)", 25, 95);
            doc.setFont("helvetica", "normal"); doc.text(`SCORE: ${answers.q1}/25`, 180, 95, {align:"right"});
            doc.setFontSize(9); doc.setTextColor(100, 116, 139);
            doc.text(doc.splitTextToSize("Analysis of account locks. MFA is your first line of defense against 80% of current cyberattacks.", 155), 25, 101);

            doc.setTextColor(15, 23, 42); doc.setFontSize(11); doc.setFont("helvetica", "bold");
            doc.text("SURVIVAL (SAFETY NET)", 25, 120);
            doc.setFont("helvetica", "normal"); doc.text(`SCORE: ${answers.q2}/35`, 180, 120, {align:"right"});
            doc.setFontSize(9); doc.setTextColor(100, 116, 139);
            doc.text(doc.splitTextToSize("Data integrity check. Backups without a quarterly restore test are a critical operational liability.", 155), 25, 126);

            doc.setTextColor(15, 23, 42); doc.setFontSize(11); doc.setFont("helvetica", "bold");
            doc.text("DEFENSE (GUARD DOG)", 25, 145);
            doc.setFont("helvetica", "normal"); doc.text(`SCORE: ${answers.q3}/25`, 180, 145, {align:"right"});
            doc.setFontSize(9); doc.setTextColor(100, 116, 139);
            doc.text(doc.splitTextToSize("Endpoint detection analysis. Managed AI-EDR is required to detect behavior-based ransomware.", 155), 25, 151);

            doc.setFillColor(248, 250, 252); doc.rect(20, 175, 170, 45, 'F');
            doc.setDrawColor(74, 222, 128); doc.setLineWidth(1.5); doc.line(20, 175, 20, 220);
            doc.setTextColor(21, 128, 61); doc.setFont("helvetica", "bold"); doc.setFontSize(13);
            doc.text("2.0 SUGGESTED FIXES & MEMBERSHIP TIER", 28, 190);
            doc.setTextColor(15, 23, 42); doc.setFont("helvetica", "normal"); doc.setFontSize(10);
            doc.text(doc.splitTextToSize(remText, 155), 28, 200);

            doc.save(`Strategic-Audit-${biz.replace(/\s+/g, '-')}.pdf`);
        }
    </script>
</body>
</html>
